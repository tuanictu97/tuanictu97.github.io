<!DOCTYPE html><html lang="en">
  <head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"><title>Cloud Computing - Triển khai 1 dịch vụ cơ sở hạ tầng (Vultr) & triển khai ứng dụng Web - Hà Anh Tuấn Blog</title>

<meta name="description" content="Trong bài này tôi sẽ trình bày về sự hiểu biết của mình về (Cloud Computing) .Cụ thể hơn trong bài viết này tôi sẽ tìm hiểu về dịch vụ cho thuê cơ sở hạ tầng...">
<link rel="canonical" href="/2019/08/30/cloud-computing-trien-khai-1-dich-vu-co-so-ha-tang-vultr-trien-khai-ung-dung-website.html"><link rel="alternate" type="application/rss+xml" title="Hà Anh Tuấn Blog" href="/feed.xml"><!-- start favicons snippet, use https://realfavicongenerator.net/ --><link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png"><link rel="manifest" href="/assets/site.webmanifest"><link rel="mask-icon" href="/assets/safari-pinned-tab.svg" color="#fc4d50"><link rel="shortcut icon" href="/assets/favicon.ico">

<meta name="msapplication-TileColor" content="#ffc40d"><meta name="msapplication-config" content="/assets/browserconfig.xml">

<meta name="theme-color" content="#ffffff">
<!-- end favicons snippet --><link rel="stylesheet" href="/assets/css/main.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" ><!-- start custom head snippets -->

<!-- end custom head snippets --><script>(function() {
  window.isArray = function(val) {
    return Object.prototype.toString.call(val) === '[object Array]';
  };
  window.isString = function(val) {
    return typeof val === 'string';
  };

  window.hasEvent = function(event) {
    return 'on'.concat(event) in window.document;
  };

  window.isOverallScroller = function(node) {
    return node === document.documentElement || node === document.body || node === window;
  };

  window.isFormElement = function(node) {
    var tagName = node.tagName;
    return tagName === 'INPUT' || tagName === 'SELECT' || tagName === 'TEXTAREA';
  };

  window.pageLoad = (function () {
    var loaded = false, cbs = [];
    window.addEventListener('load', function () {
      var i;
      loaded = true;
      if (cbs.length > 0) {
        for (i = 0; i < cbs.length; i++) {
          cbs[i]();
        }
      }
    });
    return {
      then: function(cb) {
        cb && (loaded ? cb() : (cbs.push(cb)));
      }
    };
  })();
})();
(function() {
  window.throttle = function(func, wait) {
    var args, result, thisArg, timeoutId, lastCalled = 0;

    function trailingCall() {
      lastCalled = new Date;
      timeoutId = null;
      result = func.apply(thisArg, args);
    }
    return function() {
      var now = new Date,
        remaining = wait - (now - lastCalled);

      args = arguments;
      thisArg = this;

      if (remaining <= 0) {
        clearTimeout(timeoutId);
        timeoutId = null;
        lastCalled = now;
        result = func.apply(thisArg, args);
      } else if (!timeoutId) {
        timeoutId = setTimeout(trailingCall, remaining);
      }
      return result;
    };
  };
})();
(function() {
  var Set = (function() {
    var add = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (data[i] === item) {
          return;
        }
      }
      this.size ++;
      data.push(item);
      return data;
    };

    var Set = function(data) {
      this.size = 0;
      this._data = [];
      var i;
      if (data.length > 0) {
        for (i = 0; i < data.length; i++) {
          add.call(this, data[i]);
        }
      }
    };
    Set.prototype.add = add;
    Set.prototype.get = function(index) { return this._data[index]; };
    Set.prototype.has = function(item) {
      var i, data = this._data;
      for (i = 0; i < data.length; i++) {
        if (this.get(i) === item) {
          return true;
        }
      }
      return false;
    };
    Set.prototype.is = function(map) {
      if (map._data.length !== this._data.length) { return false; }
      var i, j, flag, tData = this._data, mData = map._data;
      for (i = 0; i < tData.length; i++) {
        for (flag = false, j = 0; j < mData.length; j++) {
          if (tData[i] === mData[j]) {
            flag = true;
            break;
          }
        }
        if (!flag) { return false; }
      }
      return true;
    };
    Set.prototype.values = function() {
      return this._data;
    };
    return Set;
  })();

  window.Lazyload = (function(doc) {
    var queue = {js: [], css: []}, sources = {js: {}, css: {}}, context = this;
    var createNode = function(name, attrs) {
      var node = doc.createElement(name), attr;
      for (attr in attrs) {
        if (attrs.hasOwnProperty(attr)) {
          node.setAttribute(attr, attrs[attr]);
        }
      }
      return node;
    };
    var end = function(type, url) {
      var s, q, qi, cbs, i, j, cur, val, flag;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        s[url] = true;
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (cur.urls.has(url)) {
            qi = cur, val = qi.urls.values();
            qi && (cbs = qi.callbacks);
            for (flag = true, j = 0; j < val.length; j++) {
              cur = val[j];
              if (!s[cur]) {
                flag = false;
              }
            }
            if (flag && cbs && cbs.length > 0) {
              for (j = 0; j < cbs.length; j++) {
                cbs[j].call(context);
              }
              qi.load = true;
            }
          }
        }
      }
    };
    var load = function(type, urls, callback) {
      var s, q, qi, node, i, cur,
        _urls = typeof urls === 'string' ? new Set([urls]) : new Set(urls), val, url;
      if (type === 'js' || type ==='css') {
        s = sources[type], q = queue[type];
        for (i = 0; i < q.length; i++) {
          cur = q[i];
          if (_urls.is(cur.urls)) {
            qi = cur;
            break;
          }
        }
        val = _urls.values();
        if (qi) {
          callback && (qi.load || qi.callbacks.push(callback));
          callback && (qi.load && callback());
        } else {
          q.push({
            urls: _urls,
            callbacks: callback ? [callback] : [],
            load: false
          });
          for (i = 0; i < val.length; i++) {
            node = null, url = val[i];
            if (s[url] === undefined) {
              (type === 'js' ) && (node = createNode('script', { src: url }));
              (type === 'css') && (node = createNode('link', { rel: 'stylesheet', href: url }));
              if (node) {
                node.onload = (function(type, url) {
                  return function() {
                    end(type, url);
                  };
                })(type, url);
                (doc.head || doc.body).appendChild(node);
                s[url] = false;
              }
            }
          }
        }
      }
    };
    return {
      js: function(url, callback) {
        load('js', url, callback);
      },
      css: function(url, callback) {
        load('css', url, callback);
      }
    };
  })(this.document);
})();
</script><script>
  (function() {
    var TEXT_VARIABLES = {
      version: '2.2.4',
      sources: {
        font_awesome: 'https://use.fontawesome.com/releases/v5.0.13/css/all.css',
        jquery: 'https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js',
        leancloud_js_sdk: '//cdn.jsdelivr.net/npm/leancloud-storage@3.13.2/dist/av-min.js',
        chart: 'https://cdn.bootcss.com/Chart.js/2.7.2/Chart.bundle.min.js',
        gitalk: {
          js: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.js',
          css: 'https://cdn.bootcss.com/gitalk/1.2.2/gitalk.min.css'
        },
        valine: 'https://unpkg.com/valine/dist/Valine.min.js',
        mathjax: 'https://cdn.bootcss.com/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML',
        mermaid: 'https://cdn.bootcss.com/mermaid/8.0.0-rc.8/mermaid.min.js'
      },
      site: {
        toc: {
          selectors: 'h1,h2,h3'
        }
      },
      paths: {
        search_js: '/assets/search.js'
      }
    };
    window.TEXT_VARIABLES = TEXT_VARIABLES;
  })();
</script></head>
  <body>
    <div class="root" data-is-touch="false">
      <div class="layout--page js-page-root"><div class="page__main js-page-main page__viewport has-aside cell cell--auto">

      <div class="page__main-inner"><div class="page__header d-print-none"><header class="header"><div class="main">
      <div class="header__title">
        <div class="header__brand"><?xml version="1.0" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
 "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg version="1.0" xmlns="http://www.w3.org/2000/svg"
 width="512.000000pt" height="512.000000pt" viewBox="0 0 512.000000 512.000000"
 preserveAspectRatio="xMidYMid meet">
<metadata>
Created by potrace 1.11, written by Peter Selinger 2001-2013
</metadata>
<g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"
fill="#000000" stroke="none">
<path d="M2705 5073 c-134 -26 -284 -126 -361 -243 -28 -43 -38 -48 -51 -26
-12 20 -110 87 -162 112 -313 145 -670 -47 -766 -413 -21 -80 -27 -246 -10
-303 16 -56 38 -113 46 -120 3 -3 12 -16 19 -30 51 -98 203 -275 414 -485 150
-149 228 -221 381 -354 103 -90 108 -94 188 -160 70 -58 92 -91 56 -83 -11 2
-167 66 -324 132 -11 5 -50 20 -87 34 -38 14 -96 37 -130 50 -186 71 -528 176
-662 202 -112 22 -155 27 -244 30 -79 2 -115 -1 -155 -15 -262 -91 -449 -322
-461 -571 -8 -183 61 -329 214 -455 27 -22 152 -85 169 -85 15 0 15 0 -18 -66
-62 -125 -78 -233 -55 -356 65 -341 432 -533 809 -423 177 51 411 325 700 820
32 55 71 121 86 148 16 26 29 49 29 51 0 1 28 54 63 117 34 63 71 131 82 152
21 41 27 36 39 -34 3 -19 8 -45 11 -59 15 -75 38 -210 55 -325 27 -188 30
-212 36 -290 2 -38 7 -83 9 -100 9 -63 18 -296 18 -450 1 -490 -75 -926 -224
-1275 -24 -56 -26 -68 -15 -94 25 -62 98 -87 151 -52 15 10 38 43 52 74 24 55
111 304 118 340 2 9 10 44 18 77 28 108 62 294 73 395 2 25 6 59 9 75 29 214
27 718 -5 1025 -6 52 -12 113 -15 135 -3 36 -28 210 -41 290 -3 17 -13 73 -23
125 -11 52 -18 96 -17 97 1 1 26 -30 56 -70 67 -88 232 -300 240 -307 3 -3 25
-30 50 -60 162 -200 397 -441 514 -527 122 -90 195 -115 341 -115 106 0 136 5
233 38 144 48 272 154 340 282 89 168 74 376 -40 549 l-48 73 33 16 c39 20
112 77 150 119 39 41 97 131 97 149 0 8 4 17 9 20 27 17 38 221 17 317 -26
117 -147 284 -259 356 -23 15 -44 30 -47 34 -9 10 -135 60 -189 74 -66 17
-175 13 -261 -10 -85 -22 -205 -62 -256 -85 -22 -11 -63 -28 -91 -39 -56 -22
-365 -177 -478 -239 -76 -42 -332 -192 -432 -253 -53 -31 -64 -35 -74 -23 -9
12 -4 26 29 72 110 152 360 533 437 667 150 257 267 511 290 632 20 100 8 203
-35 313 -43 110 -133 228 -225 296 -22 16 -42 31 -45 34 -11 12 -117 53 -168
65 -50 12 -164 16 -207 8z"/>
</g>
</svg>
<a title="Hà Anh Tuấn Blog
" href="/">Hà Anh Tuấn Blog</a></div><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></div><nav class="navigation">
        <ul><li class="navigation__item"><a href="/archive.html">Archive</a></li><li class="navigation__item"><a href="/about.html">About</a></li><li><button class="button button--secondary button--circle search-button js-search-toggle"><i class="fas fa-search"></i></button></li></ul>
      </nav></div>
  </header>
</div><div class="page__content"><div class ="main"><div class="grid grid--reverse">

              <div class="col-aside d-print-none js-col-aside"><aside class="page__aside js-page-aside"><div class="toc-aside js-toc-root"></div></aside></div>

              <div class="col-main cell cell--auto"><!-- start custom main top snippet -->

<!-- end custom main top snippet --><article itemscope itemtype="http://schema.org/Article"><div class="article__header"><header><h1>Cloud Computing - Triển khai 1 dịch vụ cơ sở hạ tầng (Vultr) & triển khai ứng dụng Web</h1></header><span class="split-space">&nbsp;</span>
          <a class="edit-on-github"
            title="Edit on Github"
            href="https://github.com/tuanictu97/tuanictu97.github.io/tree/master/_posts/2019-08-30-cloud-computing-trien-khai-1-dich-vu-co-so-ha-tang-vultr-trien-khai-ung-dung-website.md">
            <i class="far fa-edit"></i></a></div><meta itemprop="headline" content="Cloud Computing - Triển khai 1 dịch vụ cơ sở hạ tầng (Vultr) & triển khai ứng dụng Web"><div class="article__info clearfix"><ul class="left-col menu"><li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive.html?tag=cloud+computing">cloud computing</a>
            </li><li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive.html?tag=vultr">vultr</a>
            </li><li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive.html?tag=vps">vps</a>
            </li><li>
              <a class="button button--secondary button--pill button--sm"
                href="/archive.html?tag=lemp">lemp</a>
            </li></ul><ul class="right-col menu"><li><i class="far fa-calendar-alt"></i> <span>Aug 30, 2019</span>
            </li></ul></div><meta itemprop="author" content="Hà Anh TTuấn"/><meta itemprop="datePublished" content="2019-08-30T00:00:00+00:00">
    <meta itemprop="keywords" content="cloud computing,vultr,vps,lemp"><div class="js-article-content"><div class="layout--article"><!-- start custom article top snippet -->

<!-- end custom article top snippet --><div class="article__content" itemprop="articleBody"><p>Trong bài này tôi sẽ trình bày về sự hiểu biết của mình về (Cloud Computing) .</p>

<p>Cụ thể hơn trong bài viết này tôi sẽ tìm hiểu về dịch vụ cho thuê cơ sở hạ tầng của Vultr (Infrastructure Cloud) &amp; Cài đặt cái gói (LEMP Stack) để triển khai 1 ứng dụng website chạy trên VPS (Virtual Private Server).</p>
<h2 id="1-các-yêu-cầu-cần-thiết">1. Các yêu cầu cần thiết</h2>
<ol>
  <li>Một tài khoản Vultr đã kích hoạt thanh toán.</li>
  <li>Công cụ:
    <ul>
      <li>Webserver: Nginx</li>
      <li>Terminal/Putty</li>
      <li>FTP, FileZilla Client</li>
      <li>Git</li>
      <li>IDE: Intelli IDEA hoặc Visual Studio Code</li>
    </ul>
  </li>
  <li>Ngôn ngữ lập trình: PHP, Node.JS</li>
  <li>Database: Mariadb (MySQL), MongoDb</li>
  <li>Hệ điều hành: Centos 7
    <h2 id="2-giới-thiệu-về-vultr">2. Giới thiệu về Vultr</h2>
    <p>Vultr là nhà cung cấp dịch vụ VPS Server, Cloud Server với 100% phần cứng SSD, 16 datacenter location. Ưu điểm của Vultr là giá rẻ, hiệu năng cao và cài đặt dễ dàng, nhanh chóng.</p>
    <h3 id="21-tổng-quan-về-vultr">2.1. Tổng quan về Vultr</h3>
  </li>
</ol>

<p><img src="/assets/images/vultr-logo.png" alt="Vultr" /></p>

<p>Vultr, được thành lập vào năm 2014, đang thực hiện sứ mệnh trao quyền cho các nhà phát triển và doanh nghiệp bằng cách đơn giản hóa việc triển khai cơ sở hạ tầng thông qua nền tảng đám mây tiên tiến.</p>

<p>Vultr có vị trí chiến lược trong 16 trung tâm dữ liệu trên toàn cầu và cung cấp việc cung cấp dịch vụ đám mây: public cloud, storage, …</p>

<p><strong>Sự khác biệt</strong>:</p>
<ul>
  <li><strong>Geographic Footprint</strong>: Vultr có 16 Datacenter tại 16 thành phố giải rác trên thế giới. Điều này sẽ cung cấp các dịch vụ đám mây gần bạn nhất.</li>
  <li><strong>One Click Apps</strong>: Nhanh chóng khởi tạo các ứng dụng dễ dàng, đơn giản chỉ bằng một cú nhấp chuột. Hỗ trợ các ứng dụng như: WordPress, Prestashop, Magento, Joomla, Docker, Gitlab, Drupal, Cpanel (có tính phí bản quyền), LAMP, LEMP, Mediawiki, Minecraff, NextCloud, OpenLiteSpeed, OpenVPN, ownCloud, Plesk Onyx, Webmin.</li>
  <li><strong>Full Resource Control</strong>: Được cung cấp tài khoản root/administrator để quản lý resource.</li>
  <li><strong>Upload ISO / Mount ISO</strong>: Tạo các tùy chọn OS, hầu như không giới hạn bằng cách tải lên file ISO và cài đặt OS tùy chỉnh đó.</li>
  <li><strong>Linux, Windows and BSD</strong>: Vultr thực sự hỗ trợ một loạt các bản phân phối Linux, Windows và BSD phổ biến.</li>
  <li><strong>No Long Term Contracts</strong>: Thanh toán bằng giờ sử dụng.</li>
</ul>

<h3 id="22-công-nghệ-của-vultr">2.2. Công nghệ của Vultr</h3>
<p>Vultr cung cấp 4 dịch vụ chính:</p>
<ul>
  <li><strong>Cloud Compute</strong>: cung cấp dịch vụ thuê máy chủ ảo sử dụng CPU Intel và 100% máy chủ sử dụng SSD.</li>
  <li><strong>Dedicated Cloud</strong>: Dedicated server là một loại lưu trữ trên internet mà người sử dụng có thể thuê toàn bộ một máy chủ, không hề chia sẻ với bất cứ ai.</li>
  <li><strong>Bare Metal</strong>: là dịch vụ dedicated server. Nhưng được triển khai trên nền tảng cloud của Vultr nên thừa hưởng những tính năng như: thanh toán theo giờ, nâng cấp mở rộng, API và hỗ trợ nhiều location khác nhau.</li>
  <li><strong>Block Storage</strong>: Lưu trữ nhanh và có thể lưu trữ được hỗ trợ bởi SSD với dung lượng lên tới 10TB.</li>
</ul>

<h2 id="3-triển-khai-dịch-vụ">3. Triển khai dịch vụ</h2>
<p>Vultr có trang dashboard để quản lý cũng như giám sát tài nguyên sử dụng các dịch vụ đang sử dụng.</p>
<h3 id="31-triển-khai-mới-dịch-vụ">3.1. Triển khai mới dịch vụ</h3>
<p>Để triển khai 1 dịch vụ trên Vultr truy cập vào tab deloy (dấu +) hoặc tại <a href="https://my.vultr.com/deploy/">đây</a>.</p>

<p>Tiến hành chọn dịch vụ sử dụng</p>

<p><img src="/assets/images/select-service-vultr.png" alt="Deploy Vultr Service" /></p>

<p>Tiếp theo chọn <strong>Server Location</strong></p>

<p><img src="/assets/images//select-server-location-vultr.png" alt="Deploy Vultr Service" /></p>

<p>Sau đó chọn Server Type. Trong phần Server Type sẽ cho phép chọn OS hoặc chọn Application.</p>

<p><img src="/assets/images/server-type-vultr.png" alt="Deploy Vultr Service" /></p>

<p>Tiếp theo sẽ chọn Server Size. Trong phần Server Size sẽ cho phép chọn các plan phù hợp với nhu cầu sử dụng.</p>

<p><img src="/assets/images//server-size-vultr.png" alt="Deploy Vultr Service" /></p>

<p>Cuối cùng thiết lập các <strong>Additional Features(Enable IPv6, Enable Private Networking)</strong>, <strong>Startup Script</strong> , <strong>SSH Keys</strong>, <strong>Server Hostname &amp; Label</strong> và nhấn Deloy Now để tạo mới 1 dịch vụ.</p>

<h3 id="32-nâng-cấp-dịch-vụ">3.2. Nâng cấp dịch vụ</h3>
<p>Trong trường hợp muốn nâng cấp về tài nguyên như: RAM, CPU, Storage, IP Public…</p>

<p>Tại trang quản lý của Vultr sẽ cho phép nâng cấp plan đang sử dụng để thuê thêm tài nguyên hoặc thuê thêm IP Public.</p>

<p>Chọn plan cần nâng cấp, chọn gói và nhấn <strong>Upgrade</strong> để nâng cấp dịch vụ. Vì Vultr tính tiền theo giờ thế nên nó sẽ tính tiền plan mới khi mình upgrade thành công.</p>

<h3 id="33-xóa-bỏ-1-dịch-vụ">3.3. Xóa bỏ 1 dịch vụ</h3>
<p>Để hủy 1 dịch vụ trên Vultr cần phải truy cập trang quản lý, Chọn dịch vụ nhấn ký tự (…) và chọn Server destroy. Nhấn xác nhận quá trình destroy khá nhanh khoảng 3p đã hủy thành công 1 dịch vụ.</p>

<h2 id="4-triển-khai-ứng-dụng-web">4. Triển khai ứng dụng web</h2>
<p>Trong bài viết này tôi sẽ cài LEMP Stack trên hệ điều hành Centos. Và đẩy source lên trên server và tiến hành chạy 1 ứng dụng web.</p>

<p>Thường khi chúng ta sử dụng hosting của các nhà cung cấp dịch vụ như tenten, z.com… thường sẽ có trang dashboard để quản lý tài nguyên, source code website. Họ sử dụng control panel để tạo ra admin panel cho người dùng sử dụng. Hiện tại có khá nhiều control panel như: <strong>Cpanel</strong>, <strong>CWP(Control Web Page) Control Panel</strong>, <strong>Sentora</strong>, <strong>VestaCP</strong>, <strong>Webuzo</strong>, <strong>ISPConfig</strong>, <strong>VirtualMin</strong>, <strong>Plesk</strong>, <strong>DirectAdmin</strong>, …</p>

<p>Bản chất các control này sẽ cài các gói LEMP (Linux, Engine x, Mysql, PHP) hoặc LAMP (Linux, Apache, Mysql, PHP) để có thể tạo ra môi trường để source code website có thể chạy được. Các nhà cung cấp hosting sẽ cấu hình và tạo ra 1 control admin panel để giúp người dùng sử dụng mà không cần biết cấu hình như thế nào. Trong trường hợp này tôi sử dụng 1 dịch vụ cơ sở hạ tầng của Vultr cung cấp là: 1 server Centos 7 - Ram 512MB, 10GB SSD, 0.5TB băng thông. Để có thể chạy 1 ứng dụng web tôi cần phải cài gói LAMP hoặc LEMP và đẩy source code của tôi lên server.</p>

<h3 id="41-cài-đặt-lemp-nginx-mysql-php">4.1. Cài đặt LEMP (Nginx, MySQL, PHP)</h3>

<p class="info">LEMP server là một server chạy Linux, Nginx (đọc là Engine x), MySql và PHP (hoặc Perl/Python). Nó tương tự như LAMP server ngoại trừ việc web server nền tảng được giám sát bằng Nginx thay vì Apache.</p>

<p><strong>Cài đặt nginx</strong></p>

<p>Thêm CentOS 7 EPEL repository</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install </span>epel-release
</code></pre></div></div>
<p>Cài đặt nginx trên Centos 7</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>yum <span class="nb">install </span>nginx
</code></pre></div></div>
<p>Khởi chạy nginx</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start nginx
</code></pre></div></div>
<p>Nếu virtual private của bạn đang sử dụng firewall, run câu lệnh sau để cho phép HTTP và HTTPS traffic:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>firewall-cmd <span class="nt">--permanent</span> <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--add-service</span><span class="o">=</span>http 
<span class="nb">sudo </span>firewall-cmd <span class="nt">--permanent</span> <span class="nt">--zone</span><span class="o">=</span>public <span class="nt">--add-service</span><span class="o">=</span>https
<span class="nb">sudo </span>firewall-cmd <span class="nt">--reload</span>
</code></pre></div></div>
<p>Để kiểm tra nginx hoạt động hay chưa hãy kiểm tra bằng cách truy cập vào public IP trên webbrowser.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://server_domain_name_or_IP/
</code></pre></div></div>
<p>Nếu nhìn thấy giao diện mặc định CentOS 7 Nginx web page thì đã cài thành công nginx.</p>

<p><img src="/assets/images/nginx-default.png" alt="Installed Nginx" /></p>

<p><strong>Cài đặt PHP 7</strong></p>

<p>Bây giờ cài đặt PHP, ở đây tôi cài PHP 7. Tiến hành cài đặt PHP 7 từ remi-php72 rpm repository.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## PHP 5.3 ##</span>
yum <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common

<span class="c">## PHP 5.4 ##</span>
yum <span class="nt">--enablerepo</span><span class="o">=</span>remi <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common

<span class="c">## PHP 5.5 ##</span>
yum <span class="nt">--enablerepo</span><span class="o">=</span>remi,remi-php55 <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common

<span class="c">## PHP 5.6 ##</span>
yum <span class="nt">--enablerepo</span><span class="o">=</span>remi,remi-php56 <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common

<span class="c">## PHP 7.0 ##</span>
yum <span class="nt">--enablerepo</span><span class="o">=</span>remi,remi-php70 <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common

<span class="c">## PHP 7.1 ##</span>
yum <span class="nt">--enablerepo</span><span class="o">=</span>remi,remi-php71 <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common

<span class="c">## PHP 7.2 ##</span>
yum <span class="nt">--enablerepo</span><span class="o">=</span>remi,remi-php72 <span class="nb">install</span> <span class="nt">-y</span> nginx php-fpm php-common
</code></pre></div></div>
<p>Cài đặt các module php cần thiết. Dùng câu lệnh sau để hiển thị danh sách module có sẵn trong yum repositories.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">--enablerepo</span><span class="o">=</span>remi-php72 search php
</code></pre></div></div>
<p>Một số module PHP thông dụng:</p>
<ul>
  <li>OPcache (php-opcache) – The Zend OPcache provides faster PHP execution through opcode caching and optimization.</li>
  <li>APCu (php-pecl-apc) – APCu userland caching</li>
  <li>CLI (php-cli) – Command-line interface for PHP</li>
  <li>PEAR (php-pear) – PHP Extension and Application Repository framework</li>
  <li>PDO (php-pdo) – A database access abstraction module for PHP applications</li>
  <li>MySQL (php-mysqlnd) – A module for PHP applications that use MySQL databases</li>
  <li>PostgreSQL (php-pgsql) – A PostgreSQL database module for PHP</li>
  <li>MongoDB (php-pecl-mongo) – PHP MongoDB database driver</li>
  <li>SQLite (php-pecl-sqlite) – Extension for the SQLite Embeddable SQL Database Engine</li>
  <li>Memcache (php-pecl-memcache) – Extension to work with the Memcached caching daemon</li>
  <li>Memcached (php-pecl-memcached) – Extension to work with the Memcached caching daemon</li>
  <li>GD (php-gd) – A module for PHP applications for using the gd graphics library</li>
  <li>XML (php-xml) – A module for PHP applications which use XML
MBString (php-mbstring) – A module for PHP applications which need multi-byte string handling</li>
  <li>MCrypt (php-mcrypt) – Standard PHP module provides mcrypt library support</li>
</ul>

<p>Để cài đặt bạn hãy sử dụng lệnh <code class="language-plaintext highlighter-rouge">yum --enablerepo=remi,remi-php56 install ten_module</code>.</p>

<p>Cài các module php cần thiết sau:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>yum <span class="nt">--enablerepo</span><span class="o">=</span>remi,remi-php56 <span class="nb">install</span> <span class="nt">-y</span> php-opcache php-pecl-apcu php-cli php-pear php-pdo php-mysqlnd php-pgsql php-pecl-mongo php-pecl-sqlite php-pecl-memcache php-pecl-memcached php-gd php-mbstring php-mcrypt php-xml
</code></pre></div></div>
<p><strong>Cài đặt MySQL 5.6 (MariaDB)</strong></p>

<p>Thêm MariaDB repo</p>

<p class="info">Lưu ý: Không cần thực hiện trên CentOS 7. Phiên bản MariaDB trên CentOS 7 hiện nay là 5.5.37</p>

<p>Cài đặt hoặc update MariaDB</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## CentOS 7 ##</span>
yum <span class="nb">install</span> <span class="nt">-y</span> mariadb mariadb-server
</code></pre></div></div>
<p>Khởi động MariaDB và tự động chạy khi boot</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">## CentOS 7 ##</span>
systemctl start mariadb.service
systemctl <span class="nb">enable </span>mariadb.service
</code></pre></div></div>
<p>Cấu hình MariaDB</p>
<ul>
  <li>Set (Change) root password</li>
  <li>Remove anonymous users</li>
  <li>Disallow root login remotely</li>
  <li>Remove test database and access to it</li>
  <li>Reload privilege tables</li>
</ul>

<p>Chạy lệnh sau để cài đặt</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/usr/bin/mysql_secure_installation
</code></pre></div></div>
<p>Ngay bước đầu tiên bạn sẽ bị hỏi root password, do mới cài đặt nên tất nhiên chưa có password, nhấn Enter để tiếp tục.</p>

<p>Output tương tự như sau:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB
SERVERS IN PRODUCTION USE! PLEASE READ EACH STEP CAREFULLY!

In order to log into MariaDB to secure it, we\'ll need the current
password for the root user. If you\'ve just installed MariaDB, and
you haven\'t set the root password yet, the password will be blank,
so you should just press enter here.

Enter current password for root (enter for none):
OK, successfully used password, moving on...

Setting the root password ensures that nobody can log into the MariaDB
root user without the proper authorisation.

Set root password? [Y/n] y
New password:
Re-enter new password:
Password updated successfully!
Reloading privilege tables..
... Success!


By default, a MariaDB installation has an anonymous user, allowing anyone
to log into MariaDB without having to have a user account created for
them. This is intended only for testing, and to make the installation
go a bit smoother. You should remove them before moving into a
production environment.

Remove anonymous users? [Y/n] y
... Success!

Normally, root should only be allowed to connect from \'localhost\'. This
ensures that someone cannot guess at the root password from the network.

Disallow root login remotely? [Y/n] y
... Success!

By default, MariaDB comes with a database named \'test\' that anyone can
access. This is also intended only for testing, and should be removed
before moving into a production environment.

Remove test database and access to it? [Y/n] y
- Dropping test database...
... Success!
- Removing privileges on test database...
... Success!

Reloading the privilege tables will ensure that all changes made so far
will take effect immediately.

Reload privilege tables now? [Y/n] y
... Success!

Cleaning up...

All done! If you\'ve completed all of the above steps, your MariaDB
installation should now be secure.

Thanks for using MariaDB!
</code></pre></div></div>
<h3 id="42-tạo-block-server-nginx">4.2. Tạo Block Server Nginx</h3>
<h4 id="421-dns-domain">4.2.1. DNS Domain</h4>
<p>Để DNS bạn cần truy cập vào trang quản lý DNS của nhà cung cấp domain. Tại đây thêm 1 record Type A: Host record: php, Type: A, Value: địa chỉ ip VPS.</p>

<p><img src="/assets/images/dns-tenten.png" alt="DNS Setup" /></p>

<p>Với bản ghi trên sẽ DNS trỏ về subdomain là: php.yourdomain.com</p>

<h4 id="422-config-nginx">4.2.2. Config Nginx</h4>
<p>Để DNS có thể trỏ đúng về webser thì ta cần phải thêm 1 block server. Ở Apche2 virtual host được định nghĩa là virtual host còn đối với nginx lại được định nghĩa là block server. Mỗi 1 block server được định nghĩa trong thư mục <code class="language-plaintext highlighter-rouge">cd /etc/nginx/conf.d</code> để thêm 1 block server chỉ cần thêm 1 file <code class="language-plaintext highlighter-rouge">.conf</code>. Để thêm block server gõ lệnh sau:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /etc/nginx/conf.d
</code></pre></div></div>
<p>Tạo mới 1 block server .conf</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nano php.yourdomain.conf
</code></pre></div></div>
<p>Gõ đoạn sau vào file php.yourdomain.conf</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>server <span class="o">{</span>
    listen 80<span class="p">;</span>
    server_name yourdomain www.yourdomain<span class="p">;</span>

    location / <span class="o">{</span>
        root   /home/php/public_html<span class="p">;</span>
        index index.php index.html index.htm<span class="p">;</span>
        try_files <span class="nv">$uri</span> <span class="nv">$uri</span>/ /index.php?q<span class="o">=</span><span class="nv">$uri</span>&amp;<span class="nv">$args</span><span class="p">;</span>
    <span class="o">}</span>

    error_page  404              /404.html<span class="p">;</span>
    location <span class="o">=</span> /404.html <span class="o">{</span>
        <span class="c"># /home/php/public_html la thu muc chua source code</span>
        root   /home/php/public_html<span class="p">;</span>
    <span class="o">}</span>

    error_page   500 502 503 504  /50x.html<span class="p">;</span>
    location <span class="o">=</span> /50x.html <span class="o">{</span>
        <span class="c"># /home/php/public_html la thu muc chua source code</span>
        root   /home/php/public_html<span class="p">;</span>
    <span class="o">}</span>
    <span class="c"># pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000</span>
    <span class="c">#</span>
    location ~ <span class="se">\.</span>php<span class="nv">$ </span><span class="o">{</span>
        root           /home/php/public_html<span class="p">;</span>
        fastcgi_pass   127.0.0.1:9000<span class="p">;</span>
        fastcgi_index  index.php<span class="p">;</span>
        fastcgi_param  SCRIPT_FILENAME   <span class="nv">$document_root$fastcgi_script_name</span><span class="p">;</span>
        include        fastcgi_params<span class="p">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
<h3 id="43-upload-source-code-lên-hosting">4.3. Upload source code lên hosting</h3>
<h4 id="431-tạo-mysql-database">4.3.1. Tạo MySQL Database</h4>
<p>Gõ lệnh</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysql <span class="nt">-u</span> root <span class="nt">-p</span>
</code></pre></div></div>
<p>Tạo mới 1 Database mới</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE DATABASE cloudcomputing_db<span class="p">;</span>
</code></pre></div></div>
<p>Tạo mới user. Lệnh dưới đây sẽ tạo ra 1 user mới là <strong>cloudcomputing</strong> pass word là <strong>cloudcomputing_demo</strong></p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE USER 'cloudcomputing'@'localhost' IDENTIFIED BY 'cloudcomputing_demo';
</code></pre></div></div>
<p>Phân quyền cho user cloudcomputing</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GRANT ALL PRIVILEGES ON cloudcomputing_db. * TO 'cloudcomputing'@'localhost';
</code></pre></div></div>
<p>Reload privileges.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FLUSH PRIVILEGES;
</code></pre></div></div>
<p>Tạo 1 Table Books</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>CREATE TABLE `books` (id INT(6) UNSIGNED AUTO_INCREMENT PRIMARY KEY,`title` varchar(255) COLLATE utf8_unicode_ci NOT NULL,`author` varchar(50) COLLATE utf8_unicode_ci NOT NULL,`description` varchar(255) COLLATE utf8_unicode_ci NOT NULL) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;
</code></pre></div></div>
<p>Để thoát khỏi mysql gõ lệnh
exit;</p>
<h4 id="432-upload-source-code">4.3.2. Upload source code</h4>
<p>Có nhiều cách để đẩy source code lên hosting, có nhiều cách để upload source code lên hosting. Với 1 VPS thì sẽ không có trang <strong>Admin Panel</strong> để truy cập file manager để upload source code. Có thể sử dụng ftp (<strong>File Transfer Protocol</strong>), <strong>git</strong>, <strong>eXtplorer</strong> (Trình quản lý file cho hosting tương tự file manager).</p>

<p>Trong bài viết này tôi sử dụng git. Để clone 1 repo sử dụng lênh <code class="language-plaintext highlighter-rouge">git clone urlrepo</code>.</p>

<p>Để ví dụ 1 ứng dụng web quản lý sách đơn giản. Tôi sẽ clone repo <a href="https://github.com/tuanictu97/mvc-php-example">mvc-php-example</a></p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd</span> /home/php/public_html
git clone https://github.com/tuanictu97/mvc-php-example.git <span class="nb">.</span>
</code></pre></div></div>
</div><section class="article__sharing d-print-none"></section><div class="d-print-none"><footer class="article__footer"><meta itemprop="dateModified" content="2019-08-30T00:00:00+00:00"><!-- start custom article footer snippet -->

<!-- end custom article footer snippet --><div class="article__subscribe"><div class="subscribe"><i class="fas fa-rss"></i> <a type="application/rss+xml" href="/feed.xml">Subscribe</a></div></div><div class="article__license"></div></footer><div class="article__section-navigator clearfix"><div class="previous"><span>PREVIOUS</span><a href="/2018/01/03/nginx-amplify-cong-cu-giam-sat-nginx-mien-phi-tuyet-voi.html">Nginx Amplify – Công cụ giám sát Nginx miễn phí tuyệt vời</a></div><div class="next"><span>NEXT</span><a href="/2019/10/01/tim-hieu-devops-va-ap-dung-circle-ci.html">Tìm hiểu DevOps và áp dụng thực tế Circle CI</a></div></div></div>

</div>

<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    $(function() {
      var $this ,$scroll;
      var $articleContent = $('.js-article-content');
      var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
      var scroll = hasSidebar ? '.js-page-main' : 'html, body';
      $scroll = $(scroll);

      $articleContent.find('.highlight').each(function() {
        $this = $(this);
        $this.attr('data-lang', $this.find('code').attr('data-lang'));
      });
      $articleContent.find('h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]').each(function() {
        $this = $(this);
        $this.append($('<a class="anchor d-print-none" aria-hidden="true"></a>').html('<i class="fas fa-anchor"></i>'));
      });
      $articleContent.on('click', '.anchor', function() {
        $scroll.scrollToAnchor('#' + $(this).parent().attr('id'), 400);
      });
    });
  });
})();
</script></div><section class="page__comments d-print-none"></section></article><!-- start custom main bottom snippet -->

<!-- end custom main bottom snippet --></div>
            </div></div></div><div class="page__footer d-print-none">
<footer class="footer py-4 js-page-footer">
  <div class="main"><div itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Hà Anh TTuấn"><meta itemprop="url" content="/"><meta itemprop="description" content="I am an amazing person."><div class="footer__author-links"><div class="author-links">
  <ul class="menu menu--nowrap menu--inline"><li title="Follow me on Facebook.">
        <a class="button button--circle facebook-button" itemprop="sameAs" href="https://www.facebook.com/fb.com/tuanictu97" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M767.428571 6.857143l0 150.857143-89.714286 0q-49.142857 0-66.285714 20.571429t-17.142857 61.714286l0 108 167.428571 0-22.285714 169.142857-145.142857 0 0 433.714286-174.857143 0 0-433.714286-145.714286 0 0-169.142857 145.714286 0 0-124.571429q0-106.285714 59.428571-164.857143t158.285714-58.571429q84 0 130.285714 6.857143z" />
</svg></div>
        </a>
      </li><li title="Follow me on Twitter.">
        <a class="button button--circle twitter-button" itemprop="sameAs" href="https://twitter.com/twitter.com/tuanictu97" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path d="M1024.032 194.432c-37.664 16.704-78.176 28-120.672 33.088 43.36-26.016 76.672-67.168 92.384-116.224-40.608 24.064-85.568 41.568-133.408 50.976-38.336-40.832-92.928-66.336-153.344-66.336-116.032 0-210.08 94.048-210.08 210.08 0 16.48 1.856 32.512 5.44 47.872-174.592-8.768-329.408-92.416-433.024-219.52-18.08 31.04-28.448 67.104-28.448 105.632 0 72.896 37.088 137.184 93.472 174.88-34.432-1.088-66.816-10.528-95.168-26.272-0.032 0.864-0.032 1.76-0.032 2.656 0 101.792 72.416 186.688 168.512 205.984-17.632 4.8-36.192 7.36-55.36 7.36-13.536 0-26.688-1.312-39.52-3.776 26.72 83.456 104.32 144.192 196.256 145.888-71.904 56.352-162.496 89.92-260.928 89.92-16.96 0-33.664-0.992-50.112-2.944 92.96 59.616 203.392 94.4 322.048 94.4 386.432 0 597.728-320.128 597.728-597.76 0-9.12-0.192-18.176-0.608-27.168 41.056-29.632 76.672-66.624 104.832-108.736z" />
</svg>
</div>
        </a>
      </li><li title="Follow me on Telegram.">
        <a class="button button--circle telegram-button" itemprop="sameAs" href="https://t.me/tuanictu97" target="_blank">
          <div class="icon"><?xml version="1.0"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
    <path style="line-height:normal;text-indent:0;text-align:start;text-decoration-line:none;text-decoration-style:solid;text-decoration-color:#000;text-transform:none;block-progression:tb;isolation:auto;mix-blend-mode:normal" d="M 20.302734 2.984375 C 20.013769 2.996945 19.748583 3.080055 19.515625 3.171875 C 19.300407 3.256634 18.52754 3.5814726 17.296875 4.0976562 C 16.06621 4.61384 14.435476 5.2982348 12.697266 6.0292969 C 9.2208449 7.4914211 5.314238 9.1361259 3.3125 9.9785156 C 3.243759 10.007156 2.9645852 10.092621 2.65625 10.328125 C 2.3471996 10.564176 2.0039062 11.076462 2.0039062 11.636719 C 2.0039062 12.088671 2.2295201 12.548966 2.5019531 12.8125 C 2.7743861 13.076034 3.0504903 13.199244 3.28125 13.291016 C 3.9563403 13.559857 6.0424892 14.392968 6.9492188 14.755859 C 7.2668647 15.707799 8.0129251 17.950071 8.1875 18.501953 L 8.1855469 18.501953 C 8.3275588 18.951162 8.4659791 19.243913 8.6582031 19.488281 C 8.7543151 19.610465 8.8690398 19.721184 9.0097656 19.808594 C 9.0637596 19.842134 9.1235454 19.868148 9.1835938 19.892578 C 9.191962 19.896131 9.2005867 19.897012 9.2089844 19.900391 L 9.1855469 19.894531 C 9.2029579 19.901531 9.2185841 19.911859 9.2363281 19.917969 C 9.2652427 19.927926 9.2852873 19.927599 9.3242188 19.935547 C 9.4612233 19.977694 9.5979794 20.005859 9.7246094 20.005859 C 10.26822 20.005859 10.601562 19.710938 10.601562 19.710938 L 10.623047 19.695312 L 12.970703 17.708984 L 15.845703 20.367188 C 15.897113 20.439837 16.308174 20.998047 17.261719 20.998047 C 17.829844 20.998047 18.280978 20.718791 18.568359 20.423828 C 18.855741 20.128866 19.034757 19.82706 19.115234 19.417969 L 19.115234 19.414062 L 19.115234 19.412109 C 19.171124 19.121728 21.931641 5.265625 21.931641 5.265625 L 21.925781 5.2890625 C 22.01148 4.9067181 22.036735 4.5369631 21.935547 4.1601562 C 21.834358 3.7833495 21.561271 3.4156252 21.232422 3.2226562 C 20.903572 3.0296874 20.591699 2.9718046 20.302734 2.984375 z M 19.908203 5.1738281 C 19.799749 5.7182284 17.343164 18.059965 17.183594 18.878906 L 14.328125 16.240234 C 13.59209 15.559749 12.44438 15.535812 11.679688 16.181641 L 10.222656 17.414062 L 11 14.375 C 11 14.375 16.362547 8.9468594 16.685547 8.6308594 C 16.945547 8.3778594 17 8.2891719 17 8.2011719 C 17 8.0841719 16.939781 8 16.800781 8 C 16.675781 8 16.506016 8.1197812 16.416016 8.1757812 C 15.267511 8.8918132 10.350132 11.694224 7.96875 13.048828 C 7.8792978 12.995267 7.7913128 12.939666 7.6933594 12.900391 C 6.9119785 12.587666 5.4101276 11.985551 4.53125 11.634766 C 6.6055146 10.76177 10.161156 9.2658083 13.472656 7.8730469 C 15.210571 7.142109 16.840822 6.4570977 18.070312 5.9414062 C 19.108158 5.5060977 19.649538 5.2807035 19.908203 5.1738281 z M 17.152344 19.023438 C 17.152344 19.023438 17.154297 19.023438 17.154297 19.023438 C 17.154234 19.023761 17.152444 19.03095 17.152344 19.03125 C 17.154024 19.022709 17.151187 19.029588 17.152344 19.023438 z" font-weight="400" font-family="sans-serif" white-space="normal" overflow="visible"/>
</svg>
</div>
        </a>
      </li><li title="Follow me on Github.">
        <a class="button button--circle github-button" itemprop="sameAs" href="https://github.com/github.com/tuanictu97" target="_blank">
          <div class="icon"><svg fill="#000000" width="24px" height="24px" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg">
  <path class="svgpath" data-index="path_0" fill="#272636" d="M0 525.2c0 223.6 143.3 413.7 343 483.5 26.9 6.8 22.8-12.4 22.8-25.4l0-88.7c-155.3 18.2-161.5-84.6-172-101.7-21.1-36-70.8-45.2-56-62.3 35.4-18.2 71.4 4.6 113.1 66.3 30.2 44.7 89.1 37.2 119 29.7 6.5-26.9 20.5-50.9 39.7-69.6C248.8 728.2 181.7 630 181.7 513.2c0-56.6 18.7-108.7 55.3-150.7-23.3-69.3 2.2-128.5 5.6-137.3 66.5-6 135.5 47.6 140.9 51.8 37.8-10.2 80.9-15.6 129.1-15.6 48.5 0 91.8 5.6 129.8 15.9 12.9-9.8 77-55.8 138.8-50.2 3.3 8.8 28.2 66.7 6.3 135 37.1 42.1 56 94.6 56 151.4 0 117-67.5 215.3-228.8 243.7 26.9 26.6 43.6 63.4 43.6 104.2l0 128.8c0.9 10.3 0 20.5 17.2 20.5C878.1 942.4 1024 750.9 1024 525.3c0-282.9-229.3-512-512-512C229.1 13.2 0 242.3 0 525.2L0 525.2z" />
</svg>
</div>
        </a>
      </li></ul>
</div>
</div>
    </div><div class="site-info mt-2">
      <div>© Hà Anh Tuấn Blog 2019,
        Powered by <a title="Jekyll is a simple, blog-aware, static site generator." href="http://jekyllrb.com/">Jekyll</a>
      </div>
    </div>
  </div>
</footer></div></div>
    </div><script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $body = $('body'), $window = $(window);
    var $pageRoot = $('.js-page-root'), $pageMain = $('.js-page-main');
    var activeCount = 0;
    function modal(options) {
      var $root = this, visible, onChange, hideWhenWindowScroll = false;
      var scrollTop;
      function setOptions(options) {
        var _options = options || {};
        visible = _options.initialVisible === undefined ? false : show;
        onChange = _options.onChange;
        hideWhenWindowScroll = _options.hideWhenWindowScroll;
      }
      function init() {
        setState(visible);
      }
      function setState(isShow) {
        if (isShow === visible) {
          return;
        }
        visible = isShow;
        if (visible) {
          activeCount++;
          scrollTop = $(window).scrollTop() || $pageMain.scrollTop();
          $root.addClass('modal--show');
          $pageMain.scrollTop(scrollTop);
          activeCount === 1 && ($pageRoot.addClass('show-modal'), $body.addClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.on('scroll', hide);
          $window.on('keyup', handleKeyup);
        } else {
          activeCount > 0 && activeCount--;
          $root.removeClass('modal--show');
          $window.scrollTop(scrollTop);
          activeCount === 0 && ($pageRoot.removeClass('show-modal'), $body.removeClass('of-hidden'));
          hideWhenWindowScroll && window.hasEvent('touchstart') && $window.off('scroll', hide);
          $window.off('keyup', handleKeyup);
        }
        onChange && onChange(visible);
      }
      function show() {
        setState(true);
      }
      function hide() {
        setState(false);
      }
      function handleKeyup(e) {
        // Char Code: 27  ESC
        if (e.which ===  27) {
          hide();
        }
      }
      setOptions(options);
      init();
      return {
        show: show,
        hide: hide,
        $el: $root
      };
    }
    $.fn.modal = modal;
  });
})();
</script><div class="modal modal--overflow page__search-modal d-print-none js-page-search-modal"><script>
(function () {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    // search panel
    var search = (window.search || (window.search = {}));
    var useDefaultSearchBox = window.useDefaultSearchBox === undefined ?
      true : window.useDefaultSearchBox ;

    var $searchModal = $('.js-page-search-modal');
    var $searchToggle = $('.js-search-toggle');
    var searchModal = $searchModal.modal({ onChange: handleModalChange, hideWhenWindowScroll: true });
    var modalVisible = false;
    search.searchModal = searchModal;

    var $searchBox = null;
    var $searchInput = null;
    var $searchClear = null;

    function getModalVisible() {
      return modalVisible;
    }
    search.getModalVisible = getModalVisible;

    function handleModalChange(visible) {
      modalVisible = visible;
      if (visible) {
        search.onShow && search.onShow();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].focus();
      } else {
        search.onShow && search.onHide();
        useDefaultSearchBox && $searchInput[0] && $searchInput[0].blur();
        setTimeout(function() {
          useDefaultSearchBox && ($searchInput.val(''), $searchBox.removeClass('not-empty'));
          search.clear && search.clear();
          window.pageAsideAffix && window.pageAsideAffix.refresh();
        }, 400);
      }
    }

    $searchToggle.on('click', function() {
      modalVisible ? searchModal.hide() : searchModal.show();
    });
    // Char Code: 83  S, 191 /
    $(window).on('keyup', function(e) {
      if (!modalVisible && !window.isFormElement(e.target || e.srcElement) && (e.which === 83 || e.which === 191)) {
        modalVisible || searchModal.show();
      }
    });

    if (useDefaultSearchBox) {
      $searchBox = $('.js-search-box');
      $searchInput = $searchBox.children('input');
      $searchClear = $searchBox.children('.js-icon-clear');
      search.getSearchInput = function() {
        return $searchInput.get(0);
      };
      search.getVal = function() {
        return $searchInput.val();
      };
      search.setVal = function(val) {
        $searchInput.val(val);
      };

      $searchInput.on('focus', function() {
        $(this).addClass('focus');
      });
      $searchInput.on('blur', function() {
        $(this).removeClass('focus');
      });
      $searchInput.on('input', window.throttle(function() {
        var val = $(this).val();
        if (val === '' || typeof val !== 'string') {
          search.clear && search.clear();
        } else {
          $searchBox.addClass('not-empty');
          search.onInputNotEmpty && search.onInputNotEmpty(val);
        }
      }, 400));
      $searchClear.on('click', function() {
        $searchInput.val(''); $searchBox.removeClass('not-empty');
        search.clear && search.clear();
      });
    }
  });
})();
</script><div class="search search--dark">
  <div class="main">
    <div class="search__header">Search</div>
    <div class="search-bar">
      <div class="search-box js-search-box">
        <div class="search-box__icon-search"><i class="fas fa-search"></i></div>
        <input type="text" />
        <div class="search-box__icon-clear js-icon-clear">
          <a><i class="fas fa-times"></i></a>
        </div>
      </div>
      <button class="button button--theme-dark button--pill search__cancel js-search-toggle">
        Cancel</button>
    </div>
    <div class="search-result js-search-result"></div>
  </div>
</div>
<script>var SOURCES = window.TEXT_VARIABLES.sources;
var PAHTS = window.TEXT_VARIABLES.paths;
window.Lazyload.js([SOURCES.jquery, PAHTS.search_js], function() {
  var search = (window.search || (window.search = {}));
  var searchData = window.TEXT_SEARCH_DATA || {};

  function memorize(f) {
    var cache = {};
    return function () {
      var key = Array.prototype.join.call(arguments, ',');
      if (key in cache) return cache[key];
      else return cache[key] = f.apply(this, arguments);
    };
  }

  /// search
  function searchByQuery(query) {
    var i, j, key, keys, cur, _title, result = {};
    keys = Object.keys(searchData);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      for (j = 0; j < searchData[key].length; j++) {
        cur = searchData[key][j], _title = cur.title;
        if ((result[key] === undefined || result[key] && result[key].length < 4 )
          && _title.toLowerCase().indexOf(query.toLowerCase()) >= 0) {
          if (result[key] === undefined) {
            result[key] = [];
          }
          result[key].push(cur);
        }
      }
    }
    return result;
  }

  var renderHeader = memorize(function(header) {
    return $('<p class="search-result__header">' + header + '</p>');
  });

  var renderItem = function(index, title, url) {
    return $('<li class="search-result__item" data-index="' + index + '"><a class="button" href="' + url + '">' + title + '</a></li>');
  };

  function render(data) {
    if (!data) { return null; }
    var $root = $('<ul></ul>'), i, j, key, keys, cur, itemIndex = 0;
    keys = Object.keys(data);
    for (i = 0; i < keys.length; i++) {
      key = keys[i];
      $root.append(renderHeader(key));
      for (j = 0; j < data[key].length; j++) {
        cur = data[key][j];
        $root.append(renderItem(itemIndex++, cur.title, cur.url));
      }
    }
    return $root;
  }

  // search box
  var $result = $('.js-search-result'), $resultItems;
  var lastActiveIndex, activeIndex;

  function clear() {
    $result.html(null);
    $resultItems = $('.search-result__item'); activeIndex = 0;
  }
  function onInputNotEmpty(val) {
    $result.html(render(searchByQuery(val)));
    $resultItems = $('.search-result__item'); activeIndex = 0;
    $resultItems.eq(0).addClass('active');
  }

  search.clear = clear;
  search.onInputNotEmpty = onInputNotEmpty;

  function updateResultItems() {
    lastActiveIndex >= 0 && $resultItems.eq(lastActiveIndex).removeClass('active');
    activeIndex >= 0 && $resultItems.eq(activeIndex).addClass('active');
  }

  function moveActiveIndex(direction) {
    var itemsCount = $resultItems ? $resultItems.length : 0;
    if (itemsCount > 1) {
      lastActiveIndex = activeIndex;
      if (direction === 'up') {
        activeIndex = (activeIndex - 1 + itemsCount) % itemsCount;
      } else if (direction === 'down') {
        activeIndex = (activeIndex + 1 + itemsCount) % itemsCount;
      }
      updateResultItems();
    }
  }

  // Char Code: 13  Enter, 37  ⬅, 38  ⬆, 39  ➡, 40  ⬇
  $(window).on('keyup', function(e) {
    var modalVisible = search.getModalVisible && search.getModalVisible();
    if (modalVisible) {
      if (e.which === 38) {
        modalVisible && moveActiveIndex('up');
      } else if (e.which === 40) {
        modalVisible && moveActiveIndex('down');
      } else if (e.which === 13) {
        modalVisible && $resultItems && activeIndex >= 0 && $resultItems.eq(activeIndex).children('a')[0].click();
      }
    }
  });

  $result.on('mouseover', '.search-result__item > a', function() {
    var itemIndex = $(this).parent().data('index');
    itemIndex >= 0 && (lastActiveIndex = activeIndex, activeIndex = itemIndex, updateResultItems());
  });
});
</script></div></div>


<script>(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function scrollToAnchor(anchor, duration, callback) {
      var $root = this;
      $root.animate({ scrollTop: $(anchor).position().top }, duration, function() {
        window.history.replaceState(null, '', window.location.href.split('#')[0] + anchor);
        callback && callback();
      });
    }
    $.fn.scrollToAnchor = scrollToAnchor;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function affix(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroll,
        offsetBottom = 0, scrollTarget = window, scroll = window.document, disabled = false, isOverallScroller = true,
        rootTop, rootLeft, rootHeight, scrollBottom, rootBottomTop,
        hasInit = false, curState;

      function setOptions(options) {
        var _options = options || {};
        _options.offsetBottom && (offsetBottom = _options.offsetBottom);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroll && (scroll = _options.scroll);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $scrollTarget = $(scrollTarget);
        isOverallScroller = window.isOverallScroller($scrollTarget[0]);
        $scroll = $(scroll);
      }
      function preCalc() {
        top();
        rootHeight = $root.outerHeight();
        rootTop = $root.offset().top + (isOverallScroller ? 0 :  $scrollTarget.scrollTop());
        rootLeft = $root.offset().left;
      }
      function calc(needPreCalc) {
        needPreCalc && preCalc();
        scrollBottom = $scroll.outerHeight() - offsetBottom - rootHeight;
        rootBottomTop = scrollBottom - rootTop;
      }
      function top() {
        if (curState !== 'top') {
          $root.removeClass('fixed').css({
            left: 0,
            top: 0
          });
          curState = 'top';
        }
      }
      function fixed() {
        if (curState !== 'fixed') {
          $root.addClass('fixed').css({
            left: rootLeft + 'px',
            top: 0
          });
          curState = 'fixed';
        }
      }
      function bottom() {
        if (curState !== 'bottom') {
          $root.removeClass('fixed').css({
            left: 0,
            top: rootBottomTop + 'px'
          });
          curState = 'bottom';
        }
      }
      function setState() {
        var scrollTop = $scrollTarget.scrollTop();
        if (scrollTop >= rootTop && scrollTop <= scrollBottom) {
          fixed();
        } else if (scrollTop < rootTop) {
          top();
        } else {
          bottom();
        }
      }
      function init() {
        if(!hasInit) {
          var interval, timeout;
          calc(true); setState();
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState();
          });
          $window.on('resize', function() {
            disabled || (calc(true), setState());
          });
          hasInit = true;
        }
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions,
        refresh: function() {
          calc(true, { animation: false }); setState();
        }
      };
    }
    $.fn.affix = affix;
  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    function toc(options) {
      var $root = this, $window = $(window), $scrollTarget, $scroller, $tocUl = $('<ul class="toc toc--ellipsis"></ul>'), $tocLi, $headings, $activeLast, $activeCur,
        selectors = 'h1,h2,h3', container = 'body', scrollTarget = window, scroller = 'html, body', disabled = false,
        headingsPos, scrolling = false, hasRendered = false, hasInit = false;

      function setOptions(options) {
        var _options = options || {};
        _options.selectors && (selectors = _options.selectors);
        _options.container && (container = _options.container);
        _options.scrollTarget && (scrollTarget = _options.scrollTarget);
        _options.scroller && (scroller = _options.scroller);
        _options.disabled !== undefined && (disabled = _options.disabled);
        $headings = $(container).find(selectors).filter('[id]');
        $scrollTarget = $(scrollTarget);
        $scroller = $(scroller);
      }
      function calc() {
        headingsPos = [];
        $headings.each(function() {
          headingsPos.push(Math.floor($(this).position().top));
        });
      }
      function setState(element, disabled) {
        var scrollTop = $scrollTarget.scrollTop(), i;
        if (disabled || !headingsPos || headingsPos.length < 1) { return; }
        if (element) {
          $activeCur = element;
        } else {
          for (i = 0; i < headingsPos.length; i++) {
            if (scrollTop >= headingsPos[i]) {
              $activeCur = $tocLi.eq(i);
            } else {
              $activeCur || ($activeCur = $tocLi.eq(i));
              break;
            }
          }
        }
        $activeLast && $activeLast.removeClass('active');
        ($activeLast = $activeCur).addClass('active');
      }
      function render() {
        if(!hasRendered) {
          $root.append($tocUl);
          $headings.each(function() {
            var $this = $(this);
            $tocUl.append($('<li></li>').addClass('toc-' + $this.prop('tagName').toLowerCase())
              .append($('<a></a>').text($this.text()).attr('href', '#' + $this.prop('id'))));
          });
          $tocLi = $tocUl.children('li');
          $tocUl.on('click', 'a', function(e) {
            e.preventDefault();
            var $this = $(this);
            scrolling = true;
            setState($this.parent());
            $scroller.scrollToAnchor($this.attr('href'), 400, function() {
              scrolling = false;
            });
          });
        }
        hasRendered = true;
      }
      function init() {
        var interval, timeout;
        if(!hasInit) {
          render(); calc(); setState(null, scrolling);
          // run calc every 100 millisecond
          interval = setInterval(function() {
            calc();
          }, 100);
          timeout = setTimeout(function() {
            clearInterval(interval);
          }, 45000);
          window.pageLoad.then(function() {
            setTimeout(function() {
              clearInterval(interval);
              clearTimeout(timeout);
            }, 3000);
          });
          $scrollTarget.on('scroll', function() {
            disabled || setState(null, scrolling);
          });
          $window.on('resize', window.throttle(function() {
            if (!disabled) {
              render(); calc(); setState(null, scrolling);
            }
          }, 100));
        }
        hasInit = true;
      }

      setOptions(options);
      if (!disabled) {
        init();
      }
      $window.on('resize', window.throttle(function() {
        init();
      }, 200));
      return {
        setOptions: setOptions
      };
    }
    $.fn.toc = toc;
  });
})();
/*(function () {

})();*/
</script><script>
  /* toc must before affix, since affix need to konw toc' height. */(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  var TOC_SELECTOR = window.TEXT_VARIABLES.site.toc.selectors;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window);
    var $articleContent = $('.js-article-content');
    var $tocRoot = $('.js-toc-root'), $col2 = $('.js-col-aside');
    var toc;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');
    var hasToc = $articleContent.find(TOC_SELECTOR).length > 0;

    function disabled() {
      return $col2.css('display') === 'none' || !hasToc;
    }

    tocDisabled = disabled();

    toc = $tocRoot.toc({
      selectors: TOC_SELECTOR,
      container: $articleContent,
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      tocDisabled = disabled();
      toc && toc.setOptions({
        disabled: tocDisabled
      });
    }, 100));

  });
})();
(function() {
  var SOURCES = window.TEXT_VARIABLES.sources;
  window.Lazyload.js(SOURCES.jquery, function() {
    var $window = $(window), $pageFooter = $('.js-page-footer');
    var $pageAside = $('.js-page-aside');
    var affix;
    var tocDisabled = false;
    var hasSidebar = $('.js-page-root').hasClass('layout--page--sidebar');

    affix = $pageAside.affix({
      offsetBottom: $pageFooter.outerHeight(),
      scrollTarget: hasSidebar ? '.js-page-main' : null,
      scroller: hasSidebar ? '.js-page-main' : null,
      scroll: hasSidebar ? $('.js-page-main').children() : null,
      disabled: tocDisabled
    });

    $window.on('resize', window.throttle(function() {
      affix && affix.setOptions({
        disabled: tocDisabled
      });
    }, 100));

    window.pageAsideAffix = affix;
  });
})();
</script>
    </div>
    <script>(function () {
  var $root = document.getElementsByClassName('root')[0];
  if (window.hasEvent('touchstart')) {
    $root.dataset.isTouch = true;
    document.addEventListener('touchstart', function(){}, false);
  }
})();
</script>
  </body>
</html>